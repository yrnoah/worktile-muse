webpackJsonp([1],Array(37).concat([function(t,e,n){"use strict";var a=n(4),s=n(104),r=n.n(s),o=n(94),i=(n.n(o),n(95));n.n(i);a.default.use(r.a)},function(t,e,n){"use strict";var a=n(4),s=n(125),r=n(112),o=n.n(r),i=n(114),c=n.n(i),u=n(109),l=n.n(u),d=n(111),m=n.n(d),v=n(110),f=n.n(v),p=n(113),h=n.n(p),_=n(108),g=n.n(_),x=n(107),C=n.n(x);a.default.use(s.a);var b=new s.a({routes:[{path:"/",redirect:"/home"},{path:"/home/:id",name:"Home",component:o.a,children:[{path:"message",name:"Message",component:h.a,children:[{path:"sign-up",name:"SignUp",component:g.a},{path:"chat-room",name:"ChatRoom",component:C.a}]},{path:"task",name:"Task",component:c.a},{path:"calender",name:"Calender",component:l.a},{path:"drive",name:"Drive",component:m.a},{path:"contacts",name:"Contacts",component:f.a}]}]});b.beforeEach(function(t,e,n){if(["/home/","/home"].indexOf(t.path)>-1)return void n({path:"/home/0/message/chat-room",from:e});n()}),e.a=b},function(t,e,n){n(98);var a=n(1)(n(58),n(120),null,null);t.exports=a.exports},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),s=n(39),r=n.n(s),o=n(38);n(37);a.default.config.productionTip=!1,new a.default({el:"#app",router:o.a,template:"<App/>",components:{App:r.a}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{id:0}},methods:{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(65),s=n.n(a),r=n(18),o=n.n(r);e.default={data:function(){return{content:"",inputErrorText:"",messages:[],user:null,canvasXSize:200,canvasYSize:30,contentSended:!1,canvasTopDistanceOffset:0}},computed:{vaildated:function(){var t=this.content.trim();return!(!(t.length&&t.length<=20)||this.inputErrorText)},userAvatar:function(){return"background-image: url(../../assets/avatar0.png)"}},mounted:function(){this.getUser(),this.getMessages()},methods:{handleInputOverflow:function(t){this.inputErrorText=t?"超过啦！！！！":""},sendMessage:function(){var t=this,e=Date.now(),n=this.user,a=this.content,r={user:n.NAME,content:a,timesmap:e};o.a.post("/api/create_message",{message:r}).then(function(r){console.log(r,"create message");var o={CONTENT:a,ID:t.messages.length+1,TIMESMAP:e,USER:n.NAME};t.messages=[o].concat(s()(t.messages)),t.contentSended=!0,t.createDamku(a)}),this.content=""},getUser:function(){var t=this;this.user||o.a.get("/api/get_users").then(function(e){t.user=e.data.result[3]})},getMessages:function(){var t=this;return o.a.get("/api/get_messages").then(function(e){t.messages=[].concat(s()(e.data.result)).reverse(),setTimeout(t.initCanvas)})},measureTextWidth:function(t){var e=document.createElement("CANVAS");if(e.getContext){var n=e.getContext("2d");n.font="20px serif";var a=n.measureText(t);return e=null,a&&a.width||0}return e=null,0},getCanvasWidth:function(t){return this.measureTextWidth(t)},initCanvas:function(){var t=this,e=document.querySelectorAll(".danmu");e.length&&e[0].getContext&&e.forEach(function(e,n){var a=e.getContext("2d"),s=t.messages[n].CONTENT;setTimeout(function(){return t.drawCanvas(a,s)})})},drawCanvas:function(t,e){t.clearRect(0,0,this.canvasXSize,this.canvasYSize),t.font="20px serif";var n=["#f44336","#9c27b0","#4fc3f7","#1976d2","#ffc107"];t.fillStyle=n[Math.floor(5*Math.random())],t.fillText(e,0,20)},createDamku:function(t){var e=document.createElement("CANVAS"),n=document.querySelector(".room-layout");if(e.getContext){var a=e.getContext("2d"),s=this.measureTextWidth(t);e.width=s,e.height=30,e.style.cssText="position: fixed; top: 100px; right: "+-1*s+"px; animation: scroll 8s linear;",a.font="20px serif",a.fillStyle="#ffc107",a.fillText(t,0,20)}n.append(e)},canvasStyle:function(t,e){var n=t-this.canvasTopDistanceOffset,a=20*n+20;a>this.$el.clientHeight&&(this.canvasTopDistanceOffset=t-1,a=40);var s=void 0;return t>=0&&(s="top: "+a+"px; animation: scroll 8s linear; animation-delay: "+.8*t+"s;right: "+-1*this.getCanvasWidth(e)+"px;"),s}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),s=n.n(a);e.default={data:function(){return{name:"",password:""}},methods:{createUser:function(){var t=this.name,e=this.password;if(!this.name||!this.password)return null;var n={name:t,password:e};return s.a.post("/api/create_user",{user:n}).then(function(t){console.log(t,"create user")})},getUsers:function(){return s.a.get("/api/get_users").then(function(t){return console.log(t)})},createTable:function(){return s.a.post("/api/create_table",{table:"MESSAGES"}).then(function(t){console.log(t,"create table")})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(106),s=n.n(a);e.default={components:{HomeNav:s.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{id:0,name:"",password:""}},computed:{path:function(){return"/home/"+this.id+"/message"}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,function(t,e,n){n(99);var a=n(1)(n(59),n(121),"data-v-69c4c1eb",null);t.exports=a.exports},function(t,e,n){n(101);var a=n(1)(n(60),n(123),"data-v-79b6d1e4",null);t.exports=a.exports},function(t,e,n){n(96);var a=n(1)(n(61),n(115),"data-v-0943f289",null);t.exports=a.exports},function(t,e,n){var a=n(1)(null,n(118),null,null);t.exports=a.exports},function(t,e,n){var a=n(1)(null,n(124),null,null);t.exports=a.exports},function(t,e,n){var a=n(1)(null,n(116),null,null);t.exports=a.exports},function(t,e,n){n(97);var a=n(1)(n(62),n(119),"data-v-2bef36f8",null);t.exports=a.exports},function(t,e,n){n(100);var a=n(1)(n(63),n(122),"data-v-759ba2d0",null);t.exports=a.exports},function(t,e,n){var a=n(1)(null,n(117),null,null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("创建新用户")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{placeholder:"请输入昵称",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"请输入密码",type:"text"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("button",{on:{click:function(e){e.preventDefault(),t.createUser(e)}}},[t._v("提交")]),t._v(" "),n("button",{on:{click:function(e){e.preventDefault(),t.getUsers(e)}}},[t._v("获取全部用户")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",[t._v("Drive")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",[t._v("Task")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",[t._v("Calender")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("home-nav"),t._v(" "),n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav"},[n("div",[t._m(0),t._v(" "),n("mu-icon-button",{staticClass:"icon",attrs:{icon:"chat_bubble_outline",to:"/home/"+t.id+"/message"}}),t._v(" "),n("mu-icon-button",{staticClass:"icon",attrs:{icon:"playlist_add_check",to:"/home/"+t.id+"/task"}}),t._v(" "),n("mu-icon-button",{staticClass:"icon",attrs:{icon:"date_range",to:"/home/"+t.id+"/calender"}}),t._v(" "),n("mu-icon-button",{staticClass:"icon",attrs:{icon:"folder_open",to:"/home/"+t.id+"/drive"}})],1),t._v(" "),n("div",[n("mu-icon-button",{staticClass:"icon",attrs:{icon:"perm_contact_calendar",to:"/home/"+t.id+"/contacts"}}),t._v(" "),n("mu-icon-button",{staticClass:"avatar"},[t._v("No")])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo-item"},[n("div",{staticClass:"logo"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("div",{staticClass:"menu"},[n("div",{staticClass:"header"},[n("h3",[t._v("Message")]),t._v(" "),n("div",{staticClass:"buttons"},[n("mu-icon-button",{staticClass:"notification",attrs:{icon:"notifications_none"}}),t._v(" "),n("mu-icon-button",{staticClass:"icon-add",attrs:{icon:"group_add"}})],1)]),t._v(" "),n("div",{staticClass:"search-area"},[n("mu-icon",{attrs:{value:"search",color:"#8f8f8f",size:20}}),t._v(" "),n("input",{staticClass:"search-item",attrs:{placeholder:"Search Member or Message"}})],1),t._v(" "),n("mu-menu",{staticClass:"nav-menu"},[n("mu-menu-item",{staticClass:"menu-item",attrs:{title:"Chat Message",leftIcon:"remove_red_eye",to:t.path+"/chat-room"}}),t._v(" "),n("mu-menu-item",{staticClass:"menu-item",attrs:{title:"Add User",leftIcon:"remove_red_eye",to:t.path+"/sign-up"}})],1)],1),t._v(" "),n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-layout"},[n("h3",[t._v("chat room")]),t._v(" "),n("mu-text-field",{attrs:{label:"请输入消息",labelFloat:"",maxLength:20,errorText:t.inputErrorText},on:{textOverflow:t.handleInputOverflow},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"发送",primary:"",disabled:!t.vaildated},on:{click:t.sendMessage}}),n("br"),t._v(" "),n("mu-list",{staticClass:"message-list"},[n("mu-sub-header",{staticStyle:{"text-align":"left"}},[t._v("最近聊天记录")]),t._v(" "),t._l(t.messages,function(e){return[n("mu-list-item",{staticClass:"content"},[n("img",{staticClass:"avatar",slot:"leftAvatar"}),t._v(" "),n("span",{slot:"describe"},[n("span",{staticStyle:{color:"rgba(0, 0, 0, .87)"}},[t._v(t._s(e.USER)+" -")]),t._v(" "+t._s(e.CONTENT)+"\n          "),n("br"),t._v(" "),n("span",[t._v(t._s(new Date(e.TIMESMAP).toLocaleString()))])]),t._v(" "),n("mu-icon-menu",{attrs:{icon:"more_vert",tooltip:"操作"},slot:"right"},[n("mu-menu-item",{attrs:{title:"回复"}}),t._v(" "),n("mu-menu-item",{attrs:{title:"标记"}}),t._v(" "),n("mu-menu-item",{attrs:{title:"删除"}})],1)],1),t._v(" "),n("mu-divider",{attrs:{inset:""}})]})],2),t._v(" "),n("transition-group",t._l(t.messages.slice(0,10),function(e,a){return n("canvas",{key:a,staticClass:"danmu",style:t.canvasStyle(a,e.CONTENT),attrs:{id:"danmu"+a,width:t.getCanvasWidth(e.CONTENT),height:t.canvasYSize}})}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",[t._v("Contacts")])},staticRenderFns:[]}}]),[57]);
//# sourceMappingURL=app.3c8d03ca90b470510689.js.map